{"version":3,"file":"AuctionsClient.mjs","sources":["../../../../src/plugins/auctionHouseModule/AuctionsClient.ts"],"sourcesContent":["import type { Metaplex } from '@/Metaplex';\nimport { Task } from '@/utils';\nimport type { PublicKey } from '@solana/web3.js';\nimport { AuctionHouse } from './AuctionHouse';\nimport { AuctionsBuildersClient } from './AuctionsBuildersClient';\nimport { findAuctionHousePda } from './pdas';\nimport {\n  CreateAuctionHouseInput,\n  createAuctionHouseOperation,\n  CreateAuctionHouseOutput,\n} from './createAuctionHouse';\nimport {\n  FindAuctionHouseByAddressInput,\n  findAuctionHouseByAddressOperation,\n} from './findAuctionHouseByAddress';\nimport {\n  UpdateAuctionHouseInput,\n  updateAuctionHouseOperation,\n  UpdateAuctionHouseOutput,\n} from './updateAuctionHouse';\nimport { Signer } from '@/types';\nimport { AuctionHouseClient } from './AuctionHouseClient';\n\nexport class AuctionsClient {\n  constructor(protected readonly metaplex: Metaplex) {}\n\n  builders() {\n    return new AuctionsBuildersClient(this.metaplex);\n  }\n\n  for(auctionHouse: AuctionHouse, auctioneerAuthority?: Signer) {\n    return new AuctionHouseClient(\n      this.metaplex,\n      auctionHouse,\n      auctioneerAuthority\n    );\n  }\n\n  createAuctionHouse(\n    input: CreateAuctionHouseInput\n  ): Task<CreateAuctionHouseOutput & { auctionHouse: AuctionHouse }> {\n    return new Task(async (scope) => {\n      const output = await this.metaplex\n        .operations()\n        .getTask(createAuctionHouseOperation(input))\n        .run(scope);\n      scope.throwIfCanceled();\n      const auctionHouse = await this.findAuctionHouseByAddress(\n        output.auctionHouseAddress\n      ).run(scope);\n      return { ...output, auctionHouse };\n    });\n  }\n\n  updateAuctionHouse(\n    auctionHouse: AuctionHouse,\n    input: Omit<UpdateAuctionHouseInput, 'auctionHouse'>\n  ): Task<UpdateAuctionHouseOutput & { auctionHouse: AuctionHouse }> {\n    return new Task(async (scope) => {\n      const output = await this.metaplex\n        .operations()\n        .getTask(updateAuctionHouseOperation({ auctionHouse, ...input }))\n        .run(scope);\n      scope.throwIfCanceled();\n      const updatedAuctionHouse = await this.findAuctionHouseByAddress(\n        auctionHouse.address\n      ).run(scope);\n      return { ...output, auctionHouse: updatedAuctionHouse };\n    });\n  }\n\n  findAuctionHouseByAddress(\n    address: PublicKey,\n    options?: Omit<FindAuctionHouseByAddressInput, 'address'>\n  ): Task<AuctionHouse> {\n    return this.metaplex\n      .operations()\n      .getTask(findAuctionHouseByAddressOperation({ address, ...options }));\n  }\n\n  findAuctionHouseByCreatorAndMint(\n    creator: PublicKey,\n    treasuryMint: PublicKey,\n    options?: Omit<FindAuctionHouseByAddressInput, 'address'>\n  ): Task<AuctionHouse> {\n    return this.findAuctionHouseByAddress(\n      findAuctionHousePda(creator, treasuryMint),\n      options\n    );\n  }\n}\n"],"names":["AuctionsClient","constructor","metaplex","builders","AuctionsBuildersClient","for","auctionHouse","auctioneerAuthority","AuctionHouseClient","createAuctionHouse","input","Task","scope","output","operations","getTask","createAuctionHouseOperation","run","throwIfCanceled","findAuctionHouseByAddress","auctionHouseAddress","updateAuctionHouse","updateAuctionHouseOperation","updatedAuctionHouse","address","options","findAuctionHouseByAddressOperation","findAuctionHouseByCreatorAndMint","creator","treasuryMint","findAuctionHousePda"],"mappings":";;;;;;;;AAuBO,MAAMA,cAAN,CAAqB;EAC1BC,WAAW,CAAoBC,QAApB,EAAwC;IAAA,IAApBA,CAAAA,QAAoB,GAApBA,QAAoB,CAAA;AAAE,GAAA;;AAErDC,EAAAA,QAAQ,GAAG;AACT,IAAA,OAAO,IAAIC,sBAAJ,CAA2B,IAAA,CAAKF,QAAhC,CAAP,CAAA;AACD,GAAA;;AAEDG,EAAAA,GAAG,CAACC,YAAD,EAA6BC,mBAA7B,EAA2D;IAC5D,OAAO,IAAIC,kBAAJ,CACL,IAAA,CAAKN,QADA,EAELI,YAFK,EAGLC,mBAHK,CAAP,CAAA;AAKD,GAAA;;EAEDE,kBAAkB,CAChBC,KADgB,EAEiD;AACjE,IAAA,OAAO,IAAIC,IAAJ,CAAS,MAAOC,KAAP,IAAiB;AAC/B,MAAA,MAAMC,MAAM,GAAG,MAAM,KAAKX,QAAL,CAClBY,UADkB,EAElBC,CAAAA,OAFkB,CAEVC,2BAA2B,CAACN,KAAD,CAFjB,EAGlBO,GAHkB,CAGdL,KAHc,CAArB,CAAA;AAIAA,MAAAA,KAAK,CAACM,eAAN,EAAA,CAAA;AACA,MAAA,MAAMZ,YAAY,GAAG,MAAM,IAAA,CAAKa,yBAAL,CACzBN,MAAM,CAACO,mBADkB,CAAA,CAEzBH,GAFyB,CAErBL,KAFqB,CAA3B,CAAA;MAGA,OAAO,EAAE,GAAGC,MAAL;AAAaP,QAAAA,YAAAA;OAApB,CAAA;AACD,KAVM,CAAP,CAAA;AAWD,GAAA;;AAEDe,EAAAA,kBAAkB,CAChBf,YADgB,EAEhBI,KAFgB,EAGiD;AACjE,IAAA,OAAO,IAAIC,IAAJ,CAAS,MAAOC,KAAP,IAAiB;MAC/B,MAAMC,MAAM,GAAG,MAAM,IAAKX,CAAAA,QAAL,CAClBY,UADkB,EAElBC,CAAAA,OAFkB,CAEVO,2BAA2B,CAAC;QAAEhB,YAAF;QAAgB,GAAGI,KAAAA;AAAnB,OAAD,CAFjB,CAAA,CAGlBO,GAHkB,CAGdL,KAHc,CAArB,CAAA;AAIAA,MAAAA,KAAK,CAACM,eAAN,EAAA,CAAA;AACA,MAAA,MAAMK,mBAAmB,GAAG,MAAM,IAAA,CAAKJ,yBAAL,CAChCb,YAAY,CAACkB,OADmB,CAAA,CAEhCP,GAFgC,CAE5BL,KAF4B,CAAlC,CAAA;MAGA,OAAO,EAAE,GAAGC,MAAL;AAAaP,QAAAA,YAAY,EAAEiB,mBAAAA;OAAlC,CAAA;AACD,KAVM,CAAP,CAAA;AAWD,GAAA;;AAEDJ,EAAAA,yBAAyB,CACvBK,OADuB,EAEvBC,OAFuB,EAGH;IACpB,OAAO,IAAA,CAAKvB,QAAL,CACJY,UADI,GAEJC,OAFI,CAEIW,kCAAkC,CAAC;MAAEF,OAAF;MAAW,GAAGC,OAAAA;AAAd,KAAD,CAFtC,CAAP,CAAA;AAGD,GAAA;;AAEDE,EAAAA,gCAAgC,CAC9BC,OAD8B,EAE9BC,YAF8B,EAG9BJ,OAH8B,EAIV;IACpB,OAAO,IAAA,CAAKN,yBAAL,CACLW,mBAAmB,CAACF,OAAD,EAAUC,YAAV,CADd,EAELJ,OAFK,CAAP,CAAA;AAID,GAAA;;AAlEyB;;;;"}