{"version":3,"file":"accounts.mjs","sources":["../../../../src/plugins/nftModule/accounts.ts"],"sourcesContent":["import { Buffer } from 'buffer';\nimport {\n  Edition,\n  Key,\n  MasterEditionV1,\n  MasterEditionV2,\n  Metadata,\n} from '@metaplex-foundation/mpl-token-metadata';\nimport {\n  Account,\n  AccountParser,\n  getAccountParsingAndAssertingFunction,\n  getAccountParsingFunction,\n} from '@/types';\n\nexport type MetadataAccount = Account<Metadata>;\nexport const parseMetadataAccount = getAccountParsingFunction(Metadata);\nexport const toMetadataAccount =\n  getAccountParsingAndAssertingFunction(Metadata);\n\nexport type OriginalOrPrintEditionAccountData =\n  | OriginalEditionAccountData\n  | PrintEditionAccountData;\nexport type OriginalOrPrintEditionAccount =\n  Account<OriginalOrPrintEditionAccountData>;\n\nconst originalOrPrintEditionAccountParser: AccountParser<OriginalOrPrintEditionAccountData> =\n  {\n    name: 'MasterEditionV1 | MasterEditionV2 | Edition',\n    deserialize: (data: Buffer, offset = 0) => {\n      if (data?.[0] === Key.MasterEditionV1) {\n        return MasterEditionV1.deserialize(data, offset);\n      } else if (data?.[0] === Key.MasterEditionV2) {\n        return MasterEditionV2.deserialize(data, offset);\n      } else {\n        return Edition.deserialize(data, offset);\n      }\n    },\n  };\n\nexport const parseOriginalOrPrintEditionAccount =\n  getAccountParsingFunction<OriginalOrPrintEditionAccountData>(\n    originalOrPrintEditionAccountParser\n  );\nexport const toOriginalOrPrintEditionAccount =\n  getAccountParsingAndAssertingFunction<OriginalOrPrintEditionAccountData>(\n    originalOrPrintEditionAccountParser\n  );\n\nexport const isOriginalEditionAccount = (\n  account: OriginalOrPrintEditionAccount\n): account is OriginalEditionAccount => {\n  return 'maxSupply' in account.data;\n};\n\nexport const isPrintEditionAccount = (\n  account: OriginalOrPrintEditionAccount\n): account is PrintEditionAccount => {\n  return !isOriginalEditionAccount(account);\n};\n\nexport type OriginalEditionAccountData = MasterEditionV1 | MasterEditionV2;\nexport type OriginalEditionAccount = Account<OriginalEditionAccountData>;\n\nconst originalEditionAccountParser: AccountParser<OriginalEditionAccountData> =\n  {\n    name: 'MasterEditionV1 | MasterEditionV2',\n    deserialize: (data: Buffer, offset = 0) => {\n      if (data?.[0] === Key.MasterEditionV1) {\n        return MasterEditionV1.deserialize(data, offset);\n      } else {\n        return MasterEditionV2.deserialize(data, offset);\n      }\n    },\n  };\n\nexport const parseOriginalEditionAccount =\n  getAccountParsingFunction<OriginalEditionAccountData>(\n    originalEditionAccountParser\n  );\nexport const toOriginalEditionAccount =\n  getAccountParsingAndAssertingFunction<OriginalEditionAccountData>(\n    originalEditionAccountParser\n  );\n\nexport type PrintEditionAccountData = Edition;\nexport type PrintEditionAccount = Account<PrintEditionAccountData>;\n\nexport const parsePrintEditionAccount = getAccountParsingFunction(Edition);\nexport const toPrintEditionAccount =\n  getAccountParsingAndAssertingFunction(Edition);\n"],"names":["parseMetadataAccount","getAccountParsingFunction","Metadata","toMetadataAccount","getAccountParsingAndAssertingFunction","originalOrPrintEditionAccountParser","name","deserialize","data","offset","Key","MasterEditionV1","MasterEditionV2","Edition","parseOriginalOrPrintEditionAccount","toOriginalOrPrintEditionAccount","isOriginalEditionAccount","account","isPrintEditionAccount","originalEditionAccountParser","parseOriginalEditionAccount","toOriginalEditionAccount","parsePrintEditionAccount","toPrintEditionAccount"],"mappings":";;;MAgBaA,oBAAoB,GAAGC,yBAAyB,CAACC,QAAD,EAAtD;MACMC,iBAAiB,GAC5BC,qCAAqC,CAACF,QAAD,EADhC;AASP,MAAMG,mCAAqF,GACzF;AACEC,EAAAA,IAAI,EAAE,6CADR;AAEEC,EAAAA,WAAW,EAAE,CAACC,IAAD,EAAeC,MAAM,GAAG,CAAxB,KAA8B;AACzC,IAAA,IAAI,CAAAD,IAAI,KAAJ,IAAA,IAAAA,IAAI,KAAJ,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,IAAI,CAAG,CAAH,CAAJ,MAAcE,GAAG,CAACC,eAAtB,EAAuC;AACrC,MAAA,OAAOA,eAAe,CAACJ,WAAhB,CAA4BC,IAA5B,EAAkCC,MAAlC,CAAP,CAAA;AACD,KAFD,MAEO,IAAI,CAAAD,IAAI,KAAA,IAAJ,IAAAA,IAAI,KAAA,KAAA,CAAJ,GAAAA,KAAAA,CAAAA,GAAAA,IAAI,CAAG,CAAH,CAAJ,MAAcE,GAAG,CAACE,eAAtB,EAAuC;AAC5C,MAAA,OAAOA,eAAe,CAACL,WAAhB,CAA4BC,IAA5B,EAAkCC,MAAlC,CAAP,CAAA;AACD,KAFM,MAEA;AACL,MAAA,OAAOI,OAAO,CAACN,WAAR,CAAoBC,IAApB,EAA0BC,MAA1B,CAAP,CAAA;AACD,KAAA;AACF,GAAA;AAVH,CADF,CAAA;MAcaK,kCAAkC,GAC7Cb,yBAAyB,CACvBI,mCADuB,EADpB;MAIMU,+BAA+B,GAC1CX,qCAAqC,CACnCC,mCADmC,EADhC;AAKMW,MAAAA,wBAAwB,GACnCC,OADsC,IAEA;EACtC,OAAO,WAAA,IAAeA,OAAO,CAACT,IAA9B,CAAA;AACD,EAJM;AAMMU,MAAAA,qBAAqB,GAChCD,OADmC,IAEA;AACnC,EAAA,OAAO,CAACD,wBAAwB,CAACC,OAAD,CAAhC,CAAA;AACD,EAJM;AASP,MAAME,4BAAuE,GAC3E;AACEb,EAAAA,IAAI,EAAE,mCADR;AAEEC,EAAAA,WAAW,EAAE,CAACC,IAAD,EAAeC,MAAM,GAAG,CAAxB,KAA8B;AACzC,IAAA,IAAI,CAAAD,IAAI,KAAJ,IAAA,IAAAA,IAAI,KAAJ,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,IAAI,CAAG,CAAH,CAAJ,MAAcE,GAAG,CAACC,eAAtB,EAAuC;AACrC,MAAA,OAAOA,eAAe,CAACJ,WAAhB,CAA4BC,IAA5B,EAAkCC,MAAlC,CAAP,CAAA;AACD,KAFD,MAEO;AACL,MAAA,OAAOG,eAAe,CAACL,WAAhB,CAA4BC,IAA5B,EAAkCC,MAAlC,CAAP,CAAA;AACD,KAAA;AACF,GAAA;AARH,CADF,CAAA;MAYaW,2BAA2B,GACtCnB,yBAAyB,CACvBkB,4BADuB,EADpB;MAIME,wBAAwB,GACnCjB,qCAAqC,CACnCe,4BADmC,EADhC;MAQMG,wBAAwB,GAAGrB,yBAAyB,CAACY,OAAD,EAA1D;MACMU,qBAAqB,GAChCnB,qCAAqC,CAACS,OAAD;;;;"}